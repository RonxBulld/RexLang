
CMAKE_MINIMUM_REQUIRED(VERSION 3.7.2)
set(CMAKE_CXX_STANDARD 20)
PROJECT(OpenELanguage)

SET(INSTALLROOT "${PROJECT_SOURCE_DIR}/sysroot")
SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-rpath,'$$ORIGIN/../lib/:$ORIGIN/../lib/'" )
SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${INSTALLROOT}/lib")
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${INSTALLROOT}/lib")
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${INSTALLROOT}/bin")
SET(CMAKE_INCLUDE_OUTPUT_DIRECTORY "${INSTALLROOT}/include")

FILE(MAKE_DIRECTORY ${INSTALLROOT})
FILE(MAKE_DIRECTORY ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY})
FILE(MAKE_DIRECTORY ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
FILE(MAKE_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
FILE(MAKE_DIRECTORY ${CMAKE_INCLUDE_OUTPUT_DIRECTORY})

set(CMAKE_CXX_FLAGS "-ggdb -g -O0")

ADD_SUBDIRECTORY(lite_util)
ADD_SUBDIRECTORY(Compiler)
ADD_SUBDIRECTORY(corelib)

ADD_CUSTOM_TARGET(OpenELanguage)
ADD_DEPENDENCIES(OpenELanguage oel newcore)
